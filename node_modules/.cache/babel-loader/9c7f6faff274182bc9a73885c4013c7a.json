{"ast":null,"code":"import _createClass from\"/Users/evgenijantropov/my_projects/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"/Users/evgenijantropov/my_projects/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import{apiConfig}from\"./utils\";var Api=/*#__PURE__*/_createClass(function Api(config){var _this=this;_classCallCheck(this,Api);this._handleResponse=function(response){if(response.ok){return response.json();}else{return Promise.reject(\"\\u041F\\u0440\\u043E\\u0438\\u0437\\u043E\\u0448\\u043B\\u0430 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \".concat(response.status));}};this.getCards=function(){return fetch(_this._cardsUrl,{method:'GET',headers:_this._headers}).then(function(res){return _this._handleResponse(res);});};this.addCard=function(data){return fetch(_this._cardsUrl,{method:'POST',headers:_this._headers,body:JSON.stringify(data)}).then(function(res){return _this._handleResponse(res);});};this.deleteCard=function(id){return fetch(\"\".concat(_this._cardsUrl,\"/\").concat(id),{method:'DELETE',headers:_this._headers}).then(function(res){return _this._handleResponse(res);});};this.getProfile=function(){return fetch(_this._profileUrl,{method:'GET',headers:_this._headers}).then(function(res){return _this._handleResponse(res);});};this.updateProfile=function(data){return fetch(_this._profileUrl,{method:'PATCH',headers:_this._headers,body:JSON.stringify(data)}).then(function(res){return _this._handleResponse(res);});};this.updateAvatar=function(newAvatarUrl){return fetch(\"\".concat(_this._profileUrl,\"/avatar\"),{method:'PATCH',headers:_this._headers,body:JSON.stringify({avatar:newAvatarUrl})}).then(function(res){return _this._handleResponse(res);});};this.cardLike=function(id){return fetch(\"\".concat(_this._cardsUrl,\"/\").concat(id,\"/likes\"),{method:'PUT',headers:_this._headers}).then(function(res){return _this._handleResponse(res);});};this.cardDislike=function(id){return fetch(\"\".concat(_this._cardsUrl,\"/\").concat(id,\"/likes\"),{method:'DELETE',headers:_this._headers}).then(function(res){return _this._handleResponse(res);});};this.getAllData=function(){return Promise.all([_this.getProfile(_this._profileUrl),_this.getCards(_this._cardsUrl)]);};this._profileUrl=config.userUrl;this._cardsUrl=config.cardsUrl;this._headers=config.headers;});var api=new Api(apiConfig);export default api;","map":{"version":3,"names":["apiConfig","Api","config","_handleResponse","response","ok","json","Promise","reject","status","getCards","fetch","_cardsUrl","method","headers","_headers","then","res","addCard","data","body","JSON","stringify","deleteCard","id","getProfile","_profileUrl","updateProfile","updateAvatar","newAvatarUrl","avatar","cardLike","cardDislike","getAllData","all","userUrl","cardsUrl","api"],"sources":["/Users/evgenijantropov/my_projects/mesto-react/src/utils/api.js"],"sourcesContent":["import {apiConfig} from \"./utils\";\n\nclass Api {\n    constructor(config) {\n        this._profileUrl = config.userUrl;\n        this._cardsUrl = config.cardsUrl;\n        this._headers = config.headers;\n    }\n\n    _handleResponse = (response) => {\n        if (response.ok) {\n            return response.json();\n        } else {\n            return Promise.reject(`Произошла ошибка при обработке данных ${response.status}`);\n        }\n    }\n\n    getCards = () => {\n        return fetch(this._cardsUrl, {\n            method: 'GET',\n            headers: this._headers\n        })\n            .then((res) => this._handleResponse(res));\n    }\n\n    addCard = (data) => {\n        return fetch(this._cardsUrl, {\n            method: 'POST',\n            headers: this._headers,\n            body: JSON.stringify(data)\n        })\n            .then((res) => this._handleResponse(res))\n    }\n\n    deleteCard = (id) => {\n        return fetch(`${this._cardsUrl}/${id}`, {\n            method: 'DELETE',\n            headers: this._headers,\n        })\n            .then((res) => this._handleResponse(res))\n    }\n\n    getProfile = () => {\n        return fetch(this._profileUrl, {\n            method: 'GET',\n            headers: this._headers\n        })\n            .then((res) => this._handleResponse(res))\n    }\n\n    updateProfile = (data) => {\n        return fetch(this._profileUrl, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify(data)\n        })\n            .then((res) => this._handleResponse(res))\n\n    }\n\n    updateAvatar = (newAvatarUrl) => {\n        return fetch(`${this._profileUrl}/avatar` , {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({ avatar: newAvatarUrl })\n        })\n            .then((res) => this._handleResponse(res))\n    }\n\n    cardLike = (id) => {\n        return fetch(`${this._cardsUrl}/${id}/likes`, {\n            method: 'PUT',\n            headers: this._headers\n        })\n            .then((res) => this._handleResponse(res));\n    }\n\n    cardDislike = (id) => {\n        return fetch(`${this._cardsUrl}/${id}/likes`, {\n            method: 'DELETE',\n            headers: this._headers\n        })\n            .then((res) => this._handleResponse(res));\n    }\n\n    getAllData = () => {\n        return Promise.all([this.getProfile(this._profileUrl), this.getCards(this._cardsUrl)]);\n    }\n}\n\nconst api = new Api(apiConfig);\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}